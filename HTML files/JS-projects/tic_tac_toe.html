<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
  font-family: 'Permanent Marker', cursive;
  background-color: #c6c0e2;
  height: 100vh;
  margin: 0;
}

section {
  text-align: center;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  align-items: center;
}
.game--title{
  font-size: 3em;
  color: #3d2c8f;
  margin: 0;
}
.game--container {
  display: grid;
  grid-template-columns: repeat(3, auto);
  width: 306px;
  border: 0;
}

.cell {
  font-family: 'Permanent Marker', cursive;
  width: 100px;
  height: 100px;
  border: 0;
  cursor: pointer;
  line-height: 100px;
  font-size: 60px;
  color:  #450a61;
}
.cell:nth-child(1){
  border-right:8px solid #8c7ae6;
  border-bottom:8px solid #8c7ae6;
}
.cell:nth-child(2){
  border-right:8px solid #8c7ae6;
  border-bottom:8px solid #8c7ae6;
}
.cell:nth-child(3){
  border-bottom:8px solid #8c7ae6;
}
.cell:nth-child(4){
  border-bottom:8px solid #8c7ae6;
  border-right:8px solid #8c7ae6;
}
.cell:nth-child(5){
  border-bottom:8px solid #8c7ae6;
  border-right:8px solid #8c7ae6;
}
.cell:nth-child(6){
  border-bottom:8px solid #8c7ae6;
}
.cell:nth-child(7){
  border-right:8px solid #8c7ae6;
}
.cell:nth-child(8){
  border-right:8px solid #8c7ae6;
}
.game--status{
  font-size: 2rem;
  margin: 0;
  color:  #3d2c8f;
}
.game--restart{
  padding: 12px 15px;
  cursor: pointer;
  background-color: #6049d3 ;
  border:1px solid #6049d3;
  border-radius: 4px;
  transform: scale(1);
  transition: transform 200ms ease-in-out;
  outline: none;
  color: #fff;
}
.game--restart:active{
  transform: scale(1.4);
}
.game--restart:hover{
  background-color: #4e31dd ;
}
    </style>
</head>
<body>
    <section>
        <h1 class="game--title">Tic Tac Toe</h1>
        <div class="game--container">
          <div data-cell-index="0" class="cell"></div>
          <div data-cell-index="1" class="cell"></div>
          <div data-cell-index="2" class="cell"></div>
          <div data-cell-index="3" class="cell"></div>
          <div data-cell-index="4" class="cell"></div>
          <div data-cell-index="5" class="cell"></div>
          <div data-cell-index="6" class="cell"></div>
          <div data-cell-index="7" class="cell"></div>
          <div data-cell-index="8" class="cell"></div>
        </div>
        <h2 class="game--status"></h2>
        <button class="game--restart">Restart Game</button>
      </section>
  
    





    <script>
        const statusDisplay = document.querySelector('.game--status');

        let currentPlayer = 'X';
        let gameState = ['', '', '', '', '', '', '', '', ''];
        let gameActive = true;

        const currentPlayerTurn = () => `It's ${currentPlayer}'s turn`;
        const winningMessage = () => `Player ${currentPlayer} has won!`;
        const drawMessage = () => `Game ended in a draw!`;

        statusDisplay.innerHTML = currentPlayerTurn();

        const winningConditions = [
          [0, 1, 2],
          [3, 4, 5],
          [6, 7, 8],
          [0, 3, 6],
          [1, 4, 7],
          [2, 5, 8],
          [0, 4, 8],
          [2, 4, 6]
        ];

        function handleCellPlayed(clickedCell, clickedCellIndex) {
          gameState[clickedCellIndex] = currentPlayer;
          clickedCell.innerHTML = currentPlayer;
        }

        function handlePlayerChange() {
          currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
          statusDisplay.innerHTML = currentPlayerTurn();
        }

        function handleResultValidation() {
          let roundWon = false;
          for (let i = 0; i <= winningConditions.length - 1; i++){
            const winCondition = winningConditions[i];
            let a = gameState[winCondition[0]];
            let b = gameState[winCondition[1]];
            let c = gameState[winCondition[2]];
            if (a === '' || b === '' || c === '') {
              continue;
            }
            if (a === b && b === c) {
              roundWon = true;
              break;
            }
          }

          if (roundWon) {
            statusDisplay.innerHTML = winningMessage();
            gameActive = false;
            return;
          }

          let roundDraw = !gameState.includes('');
          if (roundDraw) {
            statusDisplay.innerHTML = drawMessage();
            gameActive = false;
            return;
          }

          handlePlayerChange();
        }

        function handleCellClick(clickedCellEvent) {
          const clickedCell = clickedCellEvent.target;
          const clickedCellIndex = parseInt(
            clickedCell.getAttribute('data-cell-index')
          );

          if (gameState[clickedCellIndex] !== '' || !gameActive) {
            return;
          }

          handleCellPlayed(clickedCell, clickedCellIndex);
          handleResultValidation();
        }

        function handleRestartGame() {
          gameActive = true;
          currentPlayer = 'X';
          gameState = ['', '', '', '', '', '', '', '', ''];
          statusDisplay.innerHTML = currentPlayerTurn();
          document.querySelectorAll('.cell').forEach(cell => (cell.innerHTML = ''));
        }

        document.querySelectorAll('.cell').forEach(cell => cell.addEventListener('click', handleCellClick));

        document.querySelector('.game--restart').addEventListener('click', handleRestartGame);
    </script>
</body>
</html>